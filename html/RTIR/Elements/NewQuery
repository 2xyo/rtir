<%INIT>
my ($Type, @basestates) = $m->comp("/RTIR/Elements/Type", Queue => $Queue);

@states = @basestates if !$states[0];

my $Query;
if ($states[0]) {
    foreach my $state (@states) {
        $Query .= " OR " if $Query;
        $Query .= "'CF.{_RTIR_State}' = '$state'";
    }
}

$Query = "( $Query )" if $Query && (scalar @states) > 1;

return $Query;

$RT::Logger->crit($Query);

</%INIT>

<%ARGS>
$Queue => undef
@states => undef
</%ARGS>
