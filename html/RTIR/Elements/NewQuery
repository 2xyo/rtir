<%INIT>
@states = grep $_, @states;
unless( @states ) {
    (undef, @states) = $m->comp("/RTIR/Elements/Type", %ARGS);
}
push @states, @add_states;

my %seen = ();
@states =  grep !$seen{$_}++, map lc, @states;

my $query = join " OR ",
            map "'CF.{_RTIR_State}' = '$_'",
            @states;
$query = "( $query )" if $query;
return $query;

</%INIT>
<%ARGS>
$Queue => undef
@states => ()
@add_states => ()
</%ARGS>
