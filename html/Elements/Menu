%# BEGIN LICENSE BLOCK
%# 
%# Copyright (c) 1996-2002 Jesse Vincent <jesse@bestpractical.com>
%# 
%# (Except where explictly superceded by other copyright notices)
%# 
%# This work is made available to you under the terms of Version 2 of
%# the GNU General Public License. A copy of that license should have
%# been provided with this software, but in any event can be snarfed
%# from www.gnu.org
%# 
%# This work is distributed in the hope that it will be useful, but
%# WITHOUT ANY WARRANTY; without even the implied warranty of
%# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
%# General Public License for more details.
%# 
%# 
%# Unless otherwise specified, all modifications, corrections or
%# extensions to this work which alter its source code become the
%# property of Best Practical Solutions, LLC when submitted for
%# inclusion in the work.
%# 
%# 
%# END LICENSE BLOCK
%#
%# font size depends on level
% if ($level gt 0) {
%   $size = $basesize-($level * 2);
%   $padding = 2;
% } else {
%   $padding = 5;
% }
<table border=0 cellspacing=<%$padding%> cellpadding=0 bordercolor=#FFFFFF width=100%>
  <span class="topnav">
% foreach $tab (sort keys %{$toptabs}) {
% if ($current_toptab eq $toptabs->{$tab}->{'path'}) {
%     $class="currenttopnav"
% } else {
%     $class="topnav"
% } 
    <tr> 
      <td class="blue" colspan=3>
        <A HREF="<%$RT::WebPath%>/<%$toptabs->{$tab}->{'path'}|n%>" class="<%$class%>" style="font-size: <%$size%>"><% $toptabs->{$tab}->{'title'}%></A>
      </td>
    </tr>
% if ($level gt 0) {
    </font>
% }
%# Second-level items
% if ($current_toptab eq $toptabs->{$tab}->{'path'}) {
% if ($tabs) {
    <tr>
      <td width=5></td>
      <td colspan=2>
        <& /RTIR/Elements/Menu, level => $level+1, current_toptab => $current_tab, current_tab => $current_subtab, toptabs => $tabs, tabs => $subtabs &>

% }
% }
%# put a line after each top-level menu entry
% if ($level eq 0) {
    <tr><td colspan=3 height=1 bgcolor="#000000"></td></tr>
% }

% }
      </td>
    </TR>
  </span>
</TABLE>

<%INIT>
my ($tab, $class, $size, $padding);
my $basesize=14;
</%INIT>

<%ARGS>
$current_toptab =>  "none"
$current_tab => "none"
$current_subtab => "none"
$toptabs => undef
$tabs => undef
$subtabs => undef
$subtabs_scalar => undef
$level => 0
</%ARGS>
