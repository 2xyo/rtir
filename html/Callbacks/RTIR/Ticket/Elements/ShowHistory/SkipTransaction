<%INIT>
# return if already skipped
return if $$skip;

# Set $skip to 1 if transaction matches criteria
# $skip is passed by reference

# skip IP changes done by system user(scrips)
return unless $Transaction->Type eq 'CustomField'
    && $Transaction->Creator == $RT::SystemUser->id;

# check only ticket's transactions
my $obj = $Transaction->Object;
return unless $obj && $obj->isa( 'RT::Ticket' );

# only check if it's an RTIR queue
my $Queue = $obj->QueueObj->Name;
return unless RT::IR->OurQueue( $obj->QueueObj );

my $cf = RT::IR::GetCustomField('IP')
    or return;
return unless $cf->id == $Transaction->Field;
return $$skip = 1;

</%INIT>

<%ARGS>
$skip => undef
$Transaction => undef
</%ARGS>
