<%INIT>

# Set $skip to 1 if transaction matches criteria
# $skip is passed by reference

# check only ticket's transactions
my $obj = $Transaction->Object;
unless ( $obj->isa( 'RT::Ticket' ) ) {
    $$skip = 0;
    return 0;
}

# only check if it's an RTIR queue
my $Queue = $obj->QueueObj->Name;
unless ( $Queue =~ /^(?:Incidents|Incident Reports|Investigations|Blocks)$/i ) {
    $$skip = 0;
    return 0;
}

if ($Transaction->Type eq 'Status' && $Transaction->Field eq 'Status' ||
    $Transaction->Type eq 'Set' && $Transaction->Field eq 'Status')
{
    $$skip = 1;
    return 1;
}

return 0;

</%INIT>

<%ARGS>
$skip => undef
$Transaction => undef
</%ARGS>
