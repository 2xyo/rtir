General upgrade instructions
============================

1) Follow specialized upgrade instructions in the sections below

2) Install the new version of RTIR. (DO NOT RUN "make initdb")

3) Update RTIR's database.
    
   Type:

        ls etc/upgrade

    For each item in that directory whose name is greater than
    your previously installed RT version, run:
    
        /opt/rt3/sbin/rt-setup-database --dba <dba> \
            --prompt-for-dba-password --action schema \
            --datadir etc/upgrade/<version>
        /opt/rt3/sbin/rt-setup-database --dba <dba> \
            --prompt-for-dba-password --action insert \
            --datadir etc/upgrade/<version>




Upgrading from RTIR 1.13
========================


NOTE: Follow instructions from previous "upgrading from" sections at
the end of this document if they apply to your installation, then
follow the instructions below.

1) Delete the following Scrips (go to Configuration / Queues / <Queue
Name> / Scrips):

In the Incidents Queue:
  SetStartsDate
  SetRTIRState
  ResolveAllChildren
  FixOwnership

In the Incident Reports Queue:
  DetectUserResponse 
  SetDue             
  SetStarts          
  UnsetDue           
  SetDueReopen       
  SetHowReported     
  SetRTIRState       
  FixOwnership       
  ReopenIncident

In the Investigations Queue:
  NotifyOnLaunch
  DetectUserResponse
  SetStarts
  SetDue
  UnsetDue
  SetDueReopen
  SetRTIRState
  FixOwnership
  ReopenIncident

In the Blocks Queue:
  NotifyOnCreate
  DetectUserResponse
  SetStarts
  SetDue
  UnsetDue
  UnsetDue
  SetDueReopen
  SetRTIRState
  FixOwnership
  ReopenIncident

2) Run the etc/upgrade/upgrade.pl script.


Upgrading from RTIR 1.1.2:
--------------------------

1) Delete the "SetDueReopen" scrip from the Incident Reports,
   Investigations, and Blocks queues.

Upgrading from RTIR 1.0.0:
--------------------------

RTIR now installs in RT's share/html directory rather than local/html,
making local modifications to RTIR easier.

1) IMPORTANT!  Back up any modifications that you've made to the
   /opt/rt3/local/html/RTIR directory.

2) Remove the old RTIR files:

   rm -r /opt/rt3/local/html/RTIR

